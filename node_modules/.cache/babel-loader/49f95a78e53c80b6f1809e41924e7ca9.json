{"ast":null,"code":"import _regeneratorRuntime from\"/home/neosoft/react-project/react-second-saga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(fetchCartGenerator),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(removeCartGenerator),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(addCakeToCartGenerator),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(removeOneFromCartGenerator),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(addCakeOrderGenerator);import{put,call}from\"@redux-saga/core/effects\";import history from\"../history\";import axios from\"axios\";import{addCakeOrder,addCakeOrderRequest,addCakeOrderSuccess,addToCartError,addToCartRequest,addToCartSuccess,fetchCartError,fetchCartRequest,fetchCartSuccess,getOrderListError,getOrderListRequest,getOrderListSuccess,removeCartError,removeCartRequest,removeCartSuccess,removeOneFromCartError,removeOneFromCartSuccess}from\"./cartAction\";export function fetchCartGenerator(){var apiCall,data;return _regeneratorRuntime.wrap(function fetchCartGenerator$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return put(fetchCartRequest());case 2:apiCall=function apiCall(){return axios.post(\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/cakecart\"),{}).then(function(response){return response.data;}).catch(function(error){throw error;});};_context.prev=3;_context.next=6;return call(apiCall);case 6:data=_context.sent;if(!data.data){_context.next=10;break;}_context.next=10;return put(fetchCartSuccess(data.data));case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);_context.next=16;return put(fetchCartError(_context.t0.message));case 16:case\"end\":return _context.stop();}}},_marked,null,[[3,12]]);}export function removeCartGenerator(action){var apiCall,data;return _regeneratorRuntime.wrap(function removeCartGenerator$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return put(removeCartRequest());case 2:apiCall=function apiCall(){var url=\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/removecakefromcart\");var data={cakeid:action.cakeid};return axios.post(url,data).then(function(response){return response.data;}).catch(function(error){throw error;});};_context2.prev=3;_context2.next=6;return call(apiCall);case 6:data=_context2.sent;if(!data.data){_context2.next=10;break;}_context2.next=10;return put(removeCartSuccess(action.cakeid));case 10:_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](3);_context2.next=16;return put(removeCartError(_context2.t0.message));case 16:case\"end\":return _context2.stop();}}},_marked2,null,[[3,12]]);}export function addCakeToCartGenerator(action){var apiCall,data;return _regeneratorRuntime.wrap(function addCakeToCartGenerator$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return put(addToCartRequest());case 2:apiCall=function apiCall(){var url=\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/addcaketocart\");var postData={name:action.payload.name,cakeid:action.payload.cakeid,price:action.payload.price,weight:action.payload.weight,image:action.payload.image,quantity:1};return axios.post(url,postData).then(function(response){return response.data;}).catch(function(error){throw error;});};_context3.prev=3;_context3.next=6;return call(apiCall);case 6:data=_context3.sent;if(!data.data){_context3.next=11;break;}alert(\"Product added to cart successfully\");_context3.next=11;return put(addToCartSuccess());case 11:_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](3);_context3.next=17;return put(addToCartError(_context3.t0.message));case 17:case\"end\":return _context3.stop();}}},_marked3,null,[[3,13]]);}export function removeOneFromCartGenerator(action){var apiCall,data;return _regeneratorRuntime.wrap(function removeOneFromCartGenerator$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return put(removeCartRequest());case 2:apiCall=function apiCall(){var url=\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/removeonecakefromcart\");var postData={cakeid:action.payload};return axios.post(url,postData).then(function(response){return response.data;}).catch(function(error){throw error;});};_context4.prev=3;_context4.next=6;return call(apiCall);case 6:data=_context4.sent;if(!data){_context4.next=10;break;}_context4.next=10;return put(removeOneFromCartSuccess(action.payload));case 10:_context4.next=16;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](3);_context4.next=16;return put(removeOneFromCartError(_context4.t0.message));case 16:case\"end\":return _context4.stop();}}},_marked4,null,[[3,12]]);}export function addCakeOrderGenerator(action){var apiCall,data;return _regeneratorRuntime.wrap(function addCakeOrderGenerator$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return put(addCakeOrderRequest());case 2:apiCall=function apiCall(){var url=\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/addcakeorder\");var data=action.payload;var header={headers:{authtoken:localStorage.token}};return axios.post(url,data,header).then(function(response){return response.data;}).catch(function(error){throw error;});};_context5.prev=3;_context5.next=6;return call(apiCall);case 6:data=_context5.sent;if(!data){_context5.next=11;break;}_context5.next=10;return put(addCakeOrderSuccess());case 10:history.push(\"/orders\");case 11:_context5.next=17;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](3);_context5.next=17;return put(addToCartError(_context5.t0.message));case 17:case\"end\":return _context5.stop();}}},_marked5,null,[[3,13]]);}","map":{"version":3,"sources":["/home/neosoft/react-project/react-second-saga/src/reduxstore/cart/cartGenerator.js"],"names":["fetchCartGenerator","removeCartGenerator","addCakeToCartGenerator","removeOneFromCartGenerator","addCakeOrderGenerator","put","call","history","axios","addCakeOrder","addCakeOrderRequest","addCakeOrderSuccess","addToCartError","addToCartRequest","addToCartSuccess","fetchCartError","fetchCartRequest","fetchCartSuccess","getOrderListError","getOrderListRequest","getOrderListSuccess","removeCartError","removeCartRequest","removeCartSuccess","removeOneFromCartError","removeOneFromCartSuccess","apiCall","post","process","env","REACT_APP_CAKE_WEBSITE_API_URL","then","response","data","catch","error","message","action","url","cakeid","postData","name","payload","price","weight","image","quantity","alert","header","headers","authtoken","localStorage","token","push"],"mappings":"6MAuBiBA,kB,iDAwBAC,mB,iDAyBAC,sB,iDAkCAC,0B,iDA2BAC,qB,EArIjB,OAASC,GAAT,CAAeC,IAAf,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACIC,YADJ,CAEIC,mBAFJ,CAGIC,mBAHJ,CAIIC,cAJJ,CAKIC,gBALJ,CAMIC,gBANJ,CAOIC,cAPJ,CAQIC,gBARJ,CASIC,gBATJ,CAUIC,iBAVJ,CAWIC,mBAXJ,CAYIC,mBAZJ,CAaIC,eAbJ,CAcIC,iBAdJ,CAeIC,iBAfJ,CAgBIC,sBAhBJ,CAiBIC,wBAjBJ,KAkBO,cAlBP,CAoBA,MAAO,SAAUzB,CAAAA,kBAAV,+JACH,MAAMK,CAAAA,GAAG,CAACW,gBAAgB,EAAjB,CAAT,CADG,OAEGU,OAFH,CAEa,QAAVA,CAAAA,OAAU,EAAM,CAClB,MAAOlB,CAAAA,KAAK,CAACmB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,8BAA1B,cAAqE,EAArE,EAAyEC,IAAzE,CACH,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAb,EADL,EAELC,KAFK,CAGH,SAAAC,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CALE,CAAP,CAOH,CAVE,iCAac,MAAM7B,CAAAA,IAAI,CAACoB,OAAD,CAAV,CAbd,OAaOO,IAbP,mBAcKA,IAAI,CAACA,IAdV,2CAeK,MAAM5B,CAAAA,GAAG,CAACY,gBAAgB,CAACgB,IAAI,CAACA,IAAN,CAAjB,CAAT,CAfL,0GAmBC,MAAM5B,CAAAA,GAAG,CAACU,cAAc,CAAC,YAAEqB,OAAH,CAAf,CAAT,CAnBD,qEAwBP,MAAO,SAAUnC,CAAAA,mBAAV,CAA8BoC,MAA9B,mKACH,MAAMhC,CAAAA,GAAG,CAACiB,iBAAiB,EAAlB,CAAT,CADG,OAGGI,OAHH,CAGa,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAMY,CAAAA,GAAG,WAAMV,OAAO,CAACC,GAAR,CAAYC,8BAAlB,uBAAT,CACA,GAAMG,CAAAA,IAAI,CAAG,CAACM,MAAM,CAACF,MAAM,CAACE,MAAf,CAAb,CACA,MAAO/B,CAAAA,KAAK,CAACmB,IAAN,CAAWW,GAAX,CAAgBL,IAAhB,EAAsBF,IAAtB,CACH,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAb,EADL,EAELC,KAFK,CAGH,SAAAC,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CALE,CAAP,CAOH,CAbE,mCAec,MAAM7B,CAAAA,IAAI,CAACoB,OAAD,CAAV,CAfd,OAeOO,IAfP,oBAgBKA,IAAI,CAACA,IAhBV,6CAiBK,MAAM5B,CAAAA,GAAG,CAACkB,iBAAiB,CAACc,MAAM,CAACE,MAAR,CAAlB,CAAT,CAjBL,+GAqBC,MAAMlC,CAAAA,GAAG,CAACgB,eAAe,CAAC,aAAEe,OAAH,CAAhB,CAAT,CArBD,uEAyBP,MAAO,SAAUlC,CAAAA,sBAAV,CAAiCmC,MAAjC,sKACH,MAAMhC,CAAAA,GAAG,CAACQ,gBAAgB,EAAjB,CAAT,CADG,OAGGa,OAHH,CAGa,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAMY,CAAAA,GAAG,WAAMV,OAAO,CAACC,GAAR,CAAYC,8BAAlB,kBAAT,CACA,GAAMU,CAAAA,QAAQ,CAAG,CACbC,IAAI,CAACJ,MAAM,CAACK,OAAP,CAAeD,IADP,CAEbF,MAAM,CAACF,MAAM,CAACK,OAAP,CAAeH,MAFT,CAGbI,KAAK,CAACN,MAAM,CAACK,OAAP,CAAeC,KAHR,CAIbC,MAAM,CAAEP,MAAM,CAACK,OAAP,CAAeE,MAJV,CAKbC,KAAK,CAACR,MAAM,CAACK,OAAP,CAAeG,KALR,CAMbC,QAAQ,CAAC,CANI,CAAjB,CAQA,MAAOtC,CAAAA,KAAK,CAACmB,IAAN,CAAWW,GAAX,CAAgBE,QAAhB,EAA0BT,IAA1B,CACH,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAb,EADL,EAELC,KAFK,CAGH,SAAAC,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CALE,CAAP,CAOH,CApBE,mCAsBc,MAAM7B,CAAAA,IAAI,CAACoB,OAAD,CAAV,CAtBd,OAsBOO,IAtBP,oBAuBKA,IAAI,CAACA,IAvBV,2BAwBKc,KAAK,CAAC,oCAAD,CAAL,CAxBL,kBAyBK,MAAM1C,CAAAA,GAAG,CAACS,gBAAgB,EAAjB,CAAT,CAzBL,+GA6BA,MAAMT,CAAAA,GAAG,CAACO,cAAc,CAAC,aAAEwB,OAAH,CAAf,CAAT,CA7BA,uEAkCP,MAAO,SAAUjC,CAAAA,0BAAV,CAAqCkC,MAArC,0KACH,MAAMhC,CAAAA,GAAG,CAACiB,iBAAiB,EAAlB,CAAT,CADG,OAGGI,OAHH,CAGa,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAMY,CAAAA,GAAG,WAAMV,OAAO,CAACC,GAAR,CAAYC,8BAAlB,0BAAT,CACA,GAAMU,CAAAA,QAAQ,CAAG,CAACD,MAAM,CAACF,MAAM,CAACK,OAAf,CAAjB,CAEA,MAAOlC,CAAAA,KAAK,CAACmB,IAAN,CAAWW,GAAX,CAAgBE,QAAhB,EAA0BT,IAA1B,CACH,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAb,EADL,EAELC,KAFK,CAGH,SAAAC,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CALE,CAAP,CAOH,CAdE,mCAiBc,MAAM7B,CAAAA,IAAI,CAACoB,OAAD,CAAV,CAjBd,OAiBOO,IAjBP,oBAkBKA,IAlBL,6CAmBK,MAAM5B,CAAAA,GAAG,CAACoB,wBAAwB,CAACY,MAAM,CAACK,OAAR,CAAzB,CAAT,CAnBL,+GAuBC,MAAMrC,CAAAA,GAAG,CAACmB,sBAAsB,CAAC,aAAEY,OAAH,CAAvB,CAAT,CAvBD,uEA2BP,MAAO,SAAUhC,CAAAA,qBAAV,CAAgCiC,MAAhC,qKACH,MAAMhC,CAAAA,GAAG,CAACK,mBAAmB,EAApB,CAAT,CADG,OAEGgB,OAFH,CAEa,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAMY,CAAAA,GAAG,WAAMV,OAAO,CAACC,GAAR,CAAYC,8BAAlB,iBAAT,CACA,GAAMG,CAAAA,IAAI,CAAGI,MAAM,CAACK,OAApB,CACA,GAAMM,CAAAA,MAAM,CAAG,CACXC,OAAO,CAAC,CACJC,SAAS,CAAEC,YAAY,CAACC,KADpB,CADG,CAAf,CAKA,MAAO5C,CAAAA,KAAK,CAACmB,IAAN,CAAWW,GAAX,CAAgBL,IAAhB,CAAsBe,MAAtB,EAA8BjB,IAA9B,CACH,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAb,EADL,EAELC,KAFK,CAGH,SAAAC,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CALE,CAAP,CAOH,CAjBE,mCAqBc,MAAM7B,CAAAA,IAAI,CAACoB,OAAD,CAAV,CArBd,OAqBOO,IArBP,oBAsBKA,IAtBL,6CAuBK,MAAM5B,CAAAA,GAAG,CAACM,mBAAmB,EAApB,CAAT,CAvBL,QAwBKJ,OAAO,CAAC8C,IAAR,CAAa,SAAb,EAxBL,+GA4BC,MAAMhD,CAAAA,GAAG,CAACO,cAAc,CAAC,aAAEwB,OAAH,CAAf,CAAT,CA5BD","sourcesContent":["import { put , call } from \"@redux-saga/core/effects\"\nimport history from \"../history\"\nimport axios from \"axios\"\nimport { \n    addCakeOrder,\n    addCakeOrderRequest,\n    addCakeOrderSuccess,\n    addToCartError,\n    addToCartRequest,\n    addToCartSuccess,\n    fetchCartError, \n    fetchCartRequest, \n    fetchCartSuccess, \n    getOrderListError, \n    getOrderListRequest, \n    getOrderListSuccess, \n    removeCartError, \n    removeCartRequest, \n    removeCartSuccess, \n    removeOneFromCartError, \n    removeOneFromCartSuccess\n} from \"./cartAction\"\n\nexport function* fetchCartGenerator() {\n    yield put(fetchCartRequest())\n    const apiCall = () => {\n        return axios.post(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/cakecart`, {}).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n\n    try{\n        const data = yield call(apiCall)\n        if (data.data) {\n            yield put(fetchCartSuccess(data.data))\n        }\n    }\n    catch(e) {\n        yield put(fetchCartError(e.message))\n    }\n    \n}\n\nexport function* removeCartGenerator(action) {\n    yield put(removeCartRequest())\n\n    const apiCall = () => {\n        const url = `${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/removecakefromcart`\n        const data = {cakeid:action.cakeid}\n        return axios.post(url, data).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n    try{\n        const data = yield call(apiCall)\n        if (data.data) {\n            yield put(removeCartSuccess(action.cakeid))\n        }\n    }\n    catch(e) {\n        yield put(removeCartError(e.message))\n    }\n}\n\nexport function* addCakeToCartGenerator(action) {\n    yield put(addToCartRequest())\n\n    const apiCall = () => {\n        const url = `${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/addcaketocart`\n        const postData = {\n            name:action.payload.name,\n            cakeid:action.payload.cakeid,\n            price:action.payload.price,\n            weight: action.payload.weight,\n            image:action.payload.image,\n            quantity:1\n        }\n        return axios.post(url, postData).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n    try{\n        const data = yield call(apiCall)\n        if (data.data) {\n            alert(\"Product added to cart successfully\")\n            yield put(addToCartSuccess())\n        }\n    }\n   catch (e) {\n       yield put(addToCartError(e.message))\n   }\n    \n}\n\nexport function* removeOneFromCartGenerator(action) {\n    yield put(removeCartRequest())\n\n    const apiCall = () => {\n        const url = `${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/removeonecakefromcart`\n        const postData = {cakeid:action.payload}\n\n        return axios.post(url, postData).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n\n    try{\n        const data = yield call(apiCall)\n        if (data) {\n            yield put(removeOneFromCartSuccess(action.payload))\n        }\n    }\n    catch(e) {\n        yield put(removeOneFromCartError(e.message))\n    }\n}\n\nexport function* addCakeOrderGenerator(action) {\n    yield put(addCakeOrderRequest())\n    const apiCall = () => {\n        const url = `${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/addcakeorder`\n        const data = action.payload\n        const header = {\n            headers:{\n                authtoken: localStorage.token\n            }\n        }\n        return axios.post(url, data, header).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n\n\n    try {\n        const data = yield call(apiCall)\n        if (data) {\n            yield put(addCakeOrderSuccess())\n            history.push(\"/orders\")\n        }\n    }\n    catch(e) {\n        yield put(addToCartError(e.message))\n    }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}