{"ast":null,"code":"import _regeneratorRuntime from\"/home/neosoft/react-project/react-second-saga/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(loginGenerator),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(fetchUserGenerator);import{put,call}from\"@redux-saga/core/effects\";import axios from\"axios\";import{fetchLoginError,fetchLoginSuccess,fetchLoginRequest,fetchUserDataRequest,fetchUserDataSuccess,fetchUserDataError}from\"./loginAction\";export function loginGenerator(action){var apiCall,data;return _regeneratorRuntime.wrap(function loginGenerator$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return put(fetchLoginRequest());case 2:apiCall=function apiCall(){return axios.post(\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/login\"),action.data).then(function(response){localStorage.setItem(\"token\",response.data.token);return response.data;}).catch(function(error){throw error;});};_context.prev=3;_context.next=6;return call(apiCall);case 6:data=_context.sent;if(!data){_context.next=10;break;}_context.next=10;return put(fetchLoginSuccess(data.token));case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);_context.next=16;return put(fetchLoginError(_context.t0.message));case 16:case\"end\":return _context.stop();}}},_marked,null,[[3,12]]);}export function fetchUserGenerator(action){var apiCall,data;return _regeneratorRuntime.wrap(function fetchUserGenerator$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return put(fetchUserDataRequest());case 2:apiCall=function apiCall(){var header={headers:{authtoken:action.authToken}};return axios.get(\"\".concat(process.env.REACT_APP_CAKE_WEBSITE_API_URL,\"/getuserdetails\"),header).then(function(response){return response.data;}).catch(function(error){throw error;});};_context2.prev=3;_context2.next=6;return call(apiCall);case 6:data=_context2.sent;if(!data){_context2.next=10;break;}_context2.next=10;return put(fetchUserDataSuccess(data.data));case 10:_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](3);_context2.next=16;return put(fetchUserDataError(_context2.t0.message));case 16:case\"end\":return _context2.stop();}}},_marked2,null,[[3,12]]);}","map":{"version":3,"sources":["/home/neosoft/react-project/react-second-saga/src/reduxstore/login/loginGenerator.js"],"names":["loginGenerator","fetchUserGenerator","put","call","axios","fetchLoginError","fetchLoginSuccess","fetchLoginRequest","fetchUserDataRequest","fetchUserDataSuccess","fetchUserDataError","action","apiCall","post","process","env","REACT_APP_CAKE_WEBSITE_API_URL","data","then","response","localStorage","setItem","token","catch","error","message","header","headers","authtoken","authToken","get"],"mappings":"6MAGiBA,c,iDAyBAC,kB,EA5BjB,OAASC,GAAT,CAAcC,IAAd,KAA0B,0BAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,eAAT,CAA0BC,iBAA1B,CAA6CC,iBAA7C,CAAgEC,oBAAhE,CAAsFC,oBAAtF,CAA4GC,kBAA5G,KAAqI,eAArI,CACA,MAAO,SAAUV,CAAAA,cAAV,CAAyBW,MAAzB,0JACJ,MAAMT,CAAAA,GAAG,CAACK,iBAAiB,EAAlB,CAAT,CADI,OAEEK,OAFF,CAEY,QAAVA,CAAAA,OAAU,EAAM,CAClB,MAAOR,CAAAA,KAAK,CAACS,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,8BAA1B,WAAiEL,MAAM,CAACM,IAAxE,EAA8EC,IAA9E,CACF,SAAAC,QAAQ,CAAI,CACRC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BF,QAAQ,CAACF,IAAT,CAAcK,KAA3C,EACA,MAAOH,CAAAA,QAAQ,CAACF,IAAhB,CACP,CAJK,EAKLM,KALK,CAMH,SAAAC,KAAK,CAAG,CACP,KAAMA,CAAAA,KAAN,CACH,CARK,CAAP,CASH,CAZG,iCAea,MAAMrB,CAAAA,IAAI,CAACS,OAAD,CAAV,CAfb,OAeMK,IAfN,mBAgBIA,IAhBJ,2CAiBC,MAAMf,CAAAA,GAAG,CAACI,iBAAiB,CAACW,IAAI,CAACK,KAAN,CAAlB,CAAT,CAjBD,0GAqBA,MAAMpB,CAAAA,GAAG,CAACG,eAAe,CAAC,YAAEoB,OAAH,CAAhB,CAAT,CArBA,qEAyBP,MAAO,SAAUxB,CAAAA,kBAAV,CAA6BU,MAA7B,kKACH,MAAMT,CAAAA,GAAG,CAACM,oBAAoB,EAArB,CAAT,CADG,OAGGI,OAHH,CAGa,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAMc,CAAAA,MAAM,CAAG,CACXC,OAAO,CAAE,CACLC,SAAS,CAACjB,MAAM,CAACkB,SADZ,CADE,CAAf,CAKA,MAAOzB,CAAAA,KAAK,CAAC0B,GAAN,WAAahB,OAAO,CAACC,GAAR,CAAYC,8BAAzB,oBAA0EU,MAA1E,EAAkFR,IAAlF,CACH,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACF,IAAb,EADL,EAELM,KAFK,CAGH,SAAAC,KAAK,CAAI,CACL,KAAMA,CAAAA,KAAN,CACH,CALE,CAAP,CAOH,CAhBE,mCAmBc,MAAMrB,CAAAA,IAAI,CAACS,OAAD,CAAV,CAnBd,OAmBOK,IAnBP,oBAoBKA,IApBL,6CAqBK,MAAMf,CAAAA,GAAG,CAACO,oBAAoB,CAACQ,IAAI,CAACA,IAAN,CAArB,CAAT,CArBL,+GAyBC,MAAMf,CAAAA,GAAG,CAACQ,kBAAkB,CAAC,aAAEe,OAAH,CAAnB,CAAT,CAzBD","sourcesContent":["import { put, call } from \"@redux-saga/core/effects\"\nimport axios from \"axios\"\nimport { fetchLoginError, fetchLoginSuccess, fetchLoginRequest, fetchUserDataRequest, fetchUserDataSuccess, fetchUserDataError} from \"./loginAction\"\nexport function* loginGenerator(action) {\n   yield put(fetchLoginRequest())\n   const apiCall = () => {\n       return axios.post(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/login`,action.data).then(\n            response => {\n                localStorage.setItem(\"token\",response.data.token)\n                return response.data\n        }\n       ).catch(\n           error =>{\n            throw error\n        })\n   }\n\n   try{\n       const data = yield call(apiCall)\n       if (data) {\n        yield put(fetchLoginSuccess(data.token))\n       }\n   }\n   catch(e) {\n       yield put(fetchLoginError(e.message))\n   }\n}\n\nexport function* fetchUserGenerator(action) {\n    yield put(fetchUserDataRequest())\n\n    const apiCall = () => {\n        const header = {\n            headers: {\n                authtoken:action.authToken\n            }\n        }\n        return axios.get(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/getuserdetails`, header).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n\n    try {\n        const data = yield call(apiCall)\n        if (data) {\n            yield put(fetchUserDataSuccess(data.data))\n        }\n    }\n    catch(e) {\n        yield put(fetchUserDataError(e.message))\n    }\n}"]},"metadata":{},"sourceType":"module"}