{"ast":null,"code":"import { put, call } from \"@redux-saga/core/effects\";\nimport axios from \"axios\";\nimport { fetchLoginError, fetchLoginSuccess, fetchLoginRequest, fetchUserDataRequest, fetchUserDataSuccess, fetchUserDataError } from \"./loginAction\";\nexport function* loginGenerator(action) {\n  yield put(fetchLoginRequest());\n\n  const apiCall = () => {\n    return axios.post(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/login`, action.data).then(response => {\n      localStorage.setItem(\"token\", response.data.token);\n      return response.data;\n    }).catch(error => {\n      throw error;\n    });\n  };\n\n  try {\n    const data = yield call(apiCall);\n\n    if (data) {\n      yield put(fetchLoginSuccess(data.token));\n    }\n  } catch (e) {\n    yield put(fetchLoginError(e.message));\n  }\n}\nexport function* fetchUserGenerator(action) {\n  yield put(fetchUserDataRequest());\n\n  const apiCall = () => {\n    const header = {\n      headers: {\n        authtoken: action.authToken\n      }\n    };\n    return axios.get(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/getuserdetails`, header).then(response => response.data).catch(error => {\n      throw error;\n    });\n  };\n\n  try {\n    const data = yield call(apiCall);\n\n    if (data) {\n      yield put(fetchUserDataSuccess(data.data));\n    }\n  } catch (e) {\n    yield put(fetchUserDataError(e.message));\n  }\n}","map":{"version":3,"sources":["/home/neosoft/react-project/react-second-saga/src/reduxstore/login/loginGenerator.js"],"names":["put","call","axios","fetchLoginError","fetchLoginSuccess","fetchLoginRequest","fetchUserDataRequest","fetchUserDataSuccess","fetchUserDataError","loginGenerator","action","apiCall","post","process","env","REACT_APP_CAKE_WEBSITE_API_URL","data","then","response","localStorage","setItem","token","catch","error","e","message","fetchUserGenerator","header","headers","authtoken","authToken","get"],"mappings":"AAAA,SAASA,GAAT,EAAcC,IAAd,QAA0B,0BAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,EAA0BC,iBAA1B,EAA6CC,iBAA7C,EAAgEC,oBAAhE,EAAsFC,oBAAtF,EAA4GC,kBAA5G,QAAqI,eAArI;AACA,OAAO,UAAUC,cAAV,CAAyBC,MAAzB,EAAiC;AACrC,QAAMV,GAAG,CAACK,iBAAiB,EAAlB,CAAT;;AACA,QAAMM,OAAO,GAAG,MAAM;AAClB,WAAOT,KAAK,CAACU,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,8BAA+B,QAAzD,EAAiEL,MAAM,CAACM,IAAxE,EAA8EC,IAA9E,CACFC,QAAQ,IAAI;AACRC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BF,QAAQ,CAACF,IAAT,CAAcK,KAA3C;AACA,aAAOH,QAAQ,CAACF,IAAhB;AACP,KAJK,EAKLM,KALK,CAMHC,KAAK,IAAG;AACP,YAAMA,KAAN;AACH,KARK,CAAP;AASH,GAVD;;AAYA,MAAG;AACC,UAAMP,IAAI,GAAG,MAAMf,IAAI,CAACU,OAAD,CAAvB;;AACA,QAAIK,IAAJ,EAAU;AACT,YAAMhB,GAAG,CAACI,iBAAiB,CAACY,IAAI,CAACK,KAAN,CAAlB,CAAT;AACA;AACJ,GALD,CAMA,OAAMG,CAAN,EAAS;AACL,UAAMxB,GAAG,CAACG,eAAe,CAACqB,CAAC,CAACC,OAAH,CAAhB,CAAT;AACH;AACH;AAED,OAAO,UAAUC,kBAAV,CAA6BhB,MAA7B,EAAqC;AACxC,QAAMV,GAAG,CAACM,oBAAoB,EAArB,CAAT;;AAEA,QAAMK,OAAO,GAAG,MAAM;AAClB,UAAMgB,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAE;AACLC,QAAAA,SAAS,EAACnB,MAAM,CAACoB;AADZ;AADE,KAAf;AAKA,WAAO5B,KAAK,CAAC6B,GAAN,CAAW,GAAElB,OAAO,CAACC,GAAR,CAAYC,8BAA+B,iBAAxD,EAA0EY,MAA1E,EAAkFV,IAAlF,CACHC,QAAQ,IAAIA,QAAQ,CAACF,IADlB,EAELM,KAFK,CAGHC,KAAK,IAAI;AACL,YAAMA,KAAN;AACH,KALE,CAAP;AAOH,GAbD;;AAeA,MAAI;AACA,UAAMP,IAAI,GAAG,MAAMf,IAAI,CAACU,OAAD,CAAvB;;AACA,QAAIK,IAAJ,EAAU;AACN,YAAMhB,GAAG,CAACO,oBAAoB,CAACS,IAAI,CAACA,IAAN,CAArB,CAAT;AACH;AACJ,GALD,CAMA,OAAMQ,CAAN,EAAS;AACL,UAAMxB,GAAG,CAACQ,kBAAkB,CAACgB,CAAC,CAACC,OAAH,CAAnB,CAAT;AACH;AACJ","sourcesContent":["import { put, call } from \"@redux-saga/core/effects\"\nimport axios from \"axios\"\nimport { fetchLoginError, fetchLoginSuccess, fetchLoginRequest, fetchUserDataRequest, fetchUserDataSuccess, fetchUserDataError} from \"./loginAction\"\nexport function* loginGenerator(action) {\n   yield put(fetchLoginRequest())\n   const apiCall = () => {\n       return axios.post(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/login`,action.data).then(\n            response => {\n                localStorage.setItem(\"token\",response.data.token)\n                return response.data\n        }\n       ).catch(\n           error =>{\n            throw error\n        })\n   }\n\n   try{\n       const data = yield call(apiCall)\n       if (data) {\n        yield put(fetchLoginSuccess(data.token))\n       }\n   }\n   catch(e) {\n       yield put(fetchLoginError(e.message))\n   }\n}\n\nexport function* fetchUserGenerator(action) {\n    yield put(fetchUserDataRequest())\n\n    const apiCall = () => {\n        const header = {\n            headers: {\n                authtoken:action.authToken\n            }\n        }\n        return axios.get(`${process.env.REACT_APP_CAKE_WEBSITE_API_URL}/getuserdetails`, header).then(\n            response => response.data\n        ).catch(\n            error => {\n                throw error\n            }\n        )\n    }\n\n    try {\n        const data = yield call(apiCall)\n        if (data) {\n            yield put(fetchUserDataSuccess(data.data))\n        }\n    }\n    catch(e) {\n        yield put(fetchUserDataError(e.message))\n    }\n}"]},"metadata":{},"sourceType":"module"}